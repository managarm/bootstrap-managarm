From 6f4a69191cb262fc7e2171a612b0d2d14a367360 Mon Sep 17 00:00:00 2001
From: no92 <no92.mail@gmail.com>
Date: Tue, 5 Nov 2024 01:44:16 +0100
Subject: [PATCH 1/2] WIP: kernel environment

---
 llvm/include/llvm/TargetParser/Triple.h | 1 +
 llvm/lib/TargetParser/Triple.cpp        | 3 +++
 2 files changed, 4 insertions(+)

diff --git a/llvm/include/llvm/TargetParser/Triple.h b/llvm/include/llvm/TargetParser/Triple.h
index 657f42303..02c4db3ef 100644
--- a/llvm/include/llvm/TargetParser/Triple.h
+++ b/llvm/include/llvm/TargetParser/Triple.h
@@ -304,6 +304,7 @@ public:
     OpenCL,
     OpenHOS,
     Mlibc,
+    Kernel,
 
     PAuthTest,
 
diff --git a/llvm/lib/TargetParser/Triple.cpp b/llvm/lib/TargetParser/Triple.cpp
index 0584c941d..43d9d5a51 100644
--- a/llvm/lib/TargetParser/Triple.cpp
+++ b/llvm/lib/TargetParser/Triple.cpp
@@ -389,6 +389,8 @@ StringRef Triple::getEnvironmentTypeName(EnvironmentType Kind) {
     return "llvm";
   case Mlibc:
     return "mlibc";
+  case Kernel:
+    return "kernel";
   }
 
   llvm_unreachable("Invalid EnvironmentType!");
@@ -773,6 +775,7 @@ static Triple::EnvironmentType parseEnvironment(StringRef EnvironmentName) {
       .StartsWith("pauthtest", Triple::PAuthTest)
       .StartsWith("llvm", Triple::LLVM)
       .StartsWith("mlibc", Triple::Mlibc)
+      .StartsWith("kernel", Triple::Kernel)
       .Default(Triple::UnknownEnvironment);
 }
 
-- 
2.50.1

