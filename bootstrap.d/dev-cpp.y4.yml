packages:
  - name: gflags
    architecture: '@OPTION:arch@'
    metadata:
      summary: Google's C++ argument parsing library
      description: The gflags package contains a C++ library that implements commandline flags processing. It includes built-in support for standard types such as string and the ability to define flags in the source file in which they are used.
      website: 'https://gflags.github.io/gflags/'
      spdx: 'BSD-3-Clause'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/gflags/gflags.git'
      tag: 'v2.2.2'
      version: '2.2.2'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 1
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '-DREGISTER_INSTALL_PREFIX=OFF'
        - '-DCMAKE_POLICY_VERSION_MINIMUM=3.5'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  # NOTE: Deprecated by upstream, do not upgrade to 0.7.1 as according to Gentoo this breaks several downstream dependencies.
  # This dependency likely should not be used anymore, contact upstreams still using it and inquire about a switch.
  - name: glog
    architecture: '@OPTION:arch@'
    metadata:
      summary: Google Logging library
      description: This package contains a C++ implementation of the Google logging module.
      website: 'http://google.github.io/glog/'
      spdx: 'BSD-3-Clause'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/google/glog.git'
      tag: 'v0.6.0'
      version: '0.6.0'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 1
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '-DBUILD_TESTING=OFF'
        - '-DWITH_GFLAGS=OFF'
        - '-DWITH_GTEST=OFF'
        - '-DWITH_UNWIND=OFF'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: pystring
    architecture: '@OPTION:arch@'
    metadata:
      summary: C++ functions matching the interface and behavior of python string methods
      description: This package contains C++ functions matching the interface and behavior of python string methods with std::string.
      website: 'https://github.com/imageworks/pystring'
      spdx: 'BSD-3-Clause'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/imageworks/pystring.git'
      tag: 'v1.1.4'
      version: '1.1.4'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 1
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: robin-map
    architecture: '@OPTION:arch@'
    metadata:
      summary: C++ fast hash map and hash set using robin hood hashing
      description: This package contains a C++ implementation of a fast hash map and hash set using robin hood hashing.
      website: 'https://github.com/Tessil/robin-map'
      spdx: 'MIT'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/Tessil/robin-map.git'
      tag: 'v1.4.0'
      version: '1.4.0'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 1
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

