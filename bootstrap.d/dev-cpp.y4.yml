tools:
  - name: host-cli11
    labels: [aarch64, riscv64]
    architecture: '@OPTION:arch@'
    from_source: cli11
    tools_required:
      - host-pkg-config
      - virtual: pkgconfig-for-host
        program_name: host-pkg-config
    revision: 1
    configure:
      - args:
        - 'meson'
        - 'setup'
        - '--native-file'
        - '@SOURCE_ROOT@/scripts/meson.native-file'
        - '--prefix=@PREFIX@'
        - '--includedir=share/cli11/include'
        - '-Ddefault_library=static'
        - '-Dprecompiled=true'
        - '@THIS_SOURCE_DIR@'
        isolate_network: false
    compile:
      - args: ['ninja']
    install:
      - args: ['ninja', 'install']
        quiet: true

packages:
  - name: cli11
    labels: [aarch64, riscv64]
    architecture: '@OPTION:arch@'
    metadata:
      summary: C++11 command line parser.
      description: CLI11 is a command line parser for C++11 and beyond that provides a rich feature set with a simple and intuitive interface.
      website: 'https://cliutils.github.io/CLI11/book/'
      spdx: 'BSD-3-Clause'
      maintainer: "no92 <leo@managarm.org>"
      categories: ['dev-cpp']
    from_source: cli11
    tools_required:
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 1
    configure:
      - args:
        - 'meson'
        - 'setup'
        - '--cross-file'
        - '@SOURCE_ROOT@/scripts/meson-@OPTION:arch-triple@.cross-file'
        - '--prefix=/usr'
        - '--includedir=share/cli11/include'
        - '-Ddefault_library=static'
        - '-Dprecompiled=true'
        - '@THIS_SOURCE_DIR@'
        isolate_network: false
    build:
      - args: ['ninja']
      - args: ['ninja', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
        quiet: true

  - name: gflags
    architecture: '@OPTION:arch@'
    metadata:
      summary: Google's C++ argument parsing library
      description: The gflags package contains a C++ library that implements commandline flags processing. It includes built-in support for standard types such as string and the ability to define flags in the source file in which they are used.
      website: 'https://gflags.github.io/gflags/'
      spdx: 'BSD-3-Clause'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/gflags/gflags.git'
      tag: 'v2.2.2'
      version: '2.2.2'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 2
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '-DREGISTER_INSTALL_PREFIX=OFF'
        - '-DCMAKE_POLICY_VERSION_MINIMUM=3.5'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  # NOTE: Deprecated by upstream, do not upgrade to 0.7.1 as according to Gentoo this breaks several downstream dependencies.
  # This dependency likely should not be used anymore, contact upstreams still using it and inquire about a switch.
  - name: glog
    architecture: '@OPTION:arch@'
    metadata:
      summary: Google Logging library
      description: This package contains a C++ implementation of the Google logging module.
      website: 'http://google.github.io/glog/'
      spdx: 'BSD-3-Clause'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/google/glog.git'
      tag: 'v0.6.0'
      version: '0.6.0'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 2
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '-DBUILD_TESTING=OFF'
        - '-DWITH_GFLAGS=OFF'
        - '-DWITH_GTEST=OFF'
        - '-DWITH_UNWIND=OFF'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: pystring
    architecture: '@OPTION:arch@'
    metadata:
      summary: C++ functions matching the interface and behavior of python string methods
      description: This package contains C++ functions matching the interface and behavior of python string methods with std::string.
      website: 'https://github.com/imageworks/pystring'
      spdx: 'BSD-3-Clause'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/imageworks/pystring.git'
      tag: 'v1.1.4'
      version: '1.1.4'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 2
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: robin-map
    architecture: '@OPTION:arch@'
    metadata:
      summary: C++ fast hash map and hash set using robin hood hashing
      description: This package contains a C++ implementation of a fast hash map and hash set using robin hood hashing.
      website: 'https://github.com/Tessil/robin-map'
      spdx: 'MIT'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/Tessil/robin-map.git'
      tag: 'v1.4.0'
      version: '1.4.0'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 2
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DBUILD_SHARED_LIBS=ON'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: yaml-cpp
    architecture: '@OPTION:arch@'
    metadata:
      summary: YAML parser and emitter in C++
      description: This package contains a YAML parser and emitter in C++.
      website: 'https://github.com/jbeder/yaml-cpp'
      spdx: 'MIT'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['dev-cpp']
    source:
      subdir: ports
      git: 'https://github.com/jbeder/yaml-cpp.git'
      tag: '0.8.0'
      version: '0.8.0'
    tools_required:
      - host-cmake
      - system-gcc
    pkgs_required:
      - mlibc
    revision: 2
    configure:
      - args:
        - 'cmake'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DCMAKE_BUILD_TYPE=Debug'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DYAML_BUILD_SHARED_LIBS=ON'
        - '-DYAML_CPP_BUILD_TOOLS=OFF'
        - '-DYAML_CPP_BUILD_TESTS=OFF'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['make', '-j@PARALLELISM@']
      - args: ['make', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

